{
  "db": "PostgreSQL",
  "00258193052bac5732ea80944d986fc09e64c0ff1016b512fb6691452be580e6": {
    "query": "DELETE FROM stars WHERE user_id = $1 AND paste_id = $2",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      },
      "nullable": []
    }
  },
  "0eb831986fc4605009c745b553a1bd614056063ad34c971dab2d36f7174e885d": {
    "query": "INSERT INTO stars VALUES ($1, $2) ON CONFLICT DO NOTHING",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      },
      "nullable": []
    }
  },
  "16e84d577155f3c47fcb736bbad4dcaf05b21c79d47fe008e209191157f5697e": {
    "query": "SELECT username FROM users WHERE username = $1",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "username",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "32db067ee512f84092fda411950c08c46518b2c6be846c1b07072d8b10840fc7": {
    "query": "SELECT user_id FROM tokens WHERE token = $1",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "user_id",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "4560c237741ce9d4166aecd669770b3360a3ac71e649b293efb88d92c3254068": {
    "query": "SELECT id FROM users WHERE email = $1",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "4677a9ff82aaa509e02b013727470967e6a71e850a2a28399c1321d5055c0f9f": {
    "query": "\n        SELECT\n            pastes.*,\n            u.username AS \"username?\",\n            (SELECT COUNT(*) FROM stars WHERE paste_id = pastes.id) AS stars\n        FROM\n            pastes\n        LEFT JOIN LATERAL (\n            SELECT username FROM users WHERE users.id = pastes.author_id\n        ) AS u ON username IS NOT NULL\n        WHERE\n            id = $1\n    ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Text"
        },
        {
          "ordinal": 1,
          "name": "author_id",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "name",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "description",
          "type_info": "Text"
        },
        {
          "ordinal": 4,
          "name": "visibility",
          "type_info": "Int2"
        },
        {
          "ordinal": 5,
          "name": "password",
          "type_info": "Text"
        },
        {
          "ordinal": 6,
          "name": "views",
          "type_info": "Int4"
        },
        {
          "ordinal": 7,
          "name": "created_at",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 8,
          "name": "username?",
          "type_info": "Text"
        },
        {
          "ordinal": 9,
          "name": "stars",
          "type_info": "Int8"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false,
        true,
        false,
        true,
        false,
        true,
        false,
        false,
        false,
        null
      ]
    }
  },
  "5352ed0a258472751157a85b8f40d96ac3099dd96c54c4167cacc0e3539aba7e": {
    "query": "SELECT username, email, created_at FROM users WHERE id = $1",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "username",
          "type_info": "Text"
        },
        {
          "ordinal": 1,
          "name": "email",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "created_at",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false,
        true,
        false
      ]
    }
  },
  "53b42ad582c42123575242836dea5b16c68be148adccef132e6fb9cbff824f82": {
    "query": "INSERT INTO tokens VALUES ($1, $2)",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      },
      "nullable": []
    }
  },
  "5cc5ce16b3c19bf25ce2efc14bbcadc757defba7df4e45f80939efff24628dcd": {
    "query": "UPDATE pastes SET views = views + 1 RETURNING views",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "views",
          "type_info": "Int4"
        }
      ],
      "parameters": {
        "Left": []
      },
      "nullable": [
        false
      ]
    }
  },
  "68e900ff71ac44e3698956591be483101cd80636b098b15f29e4d26b16faf16d": {
    "query": "\n        SELECT\n            pastes.*,\n            u.username AS \"username?\",\n            f.filename AS \"filename?\",\n            f.content AS \"content!\",\n            f.language AS \"language?\",\n            (SELECT COUNT(*) FROM stars WHERE paste_id = pastes.id) AS stars\n        FROM\n            pastes\n        LEFT JOIN LATERAL (\n            SELECT username FROM users WHERE users.id = pastes.author_id\n        ) AS u ON username IS NOT NULL\n        LEFT JOIN LATERAL (\n            SELECT * FROM files WHERE files.paste_id = pastes.id AND files.idx = 0\n        ) AS f ON true\n        WHERE\n            id\n        IN (SELECT paste_id FROM stars WHERE user_id = $1)\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Text"
        },
        {
          "ordinal": 1,
          "name": "author_id",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "name",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "description",
          "type_info": "Text"
        },
        {
          "ordinal": 4,
          "name": "visibility",
          "type_info": "Int2"
        },
        {
          "ordinal": 5,
          "name": "password",
          "type_info": "Text"
        },
        {
          "ordinal": 6,
          "name": "views",
          "type_info": "Int4"
        },
        {
          "ordinal": 7,
          "name": "created_at",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 8,
          "name": "username?",
          "type_info": "Text"
        },
        {
          "ordinal": 9,
          "name": "filename?",
          "type_info": "Text"
        },
        {
          "ordinal": 10,
          "name": "content!",
          "type_info": "Text"
        },
        {
          "ordinal": 11,
          "name": "language?",
          "type_info": "Text"
        },
        {
          "ordinal": 12,
          "name": "stars",
          "type_info": "Int8"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false,
        true,
        false,
        true,
        false,
        true,
        false,
        false,
        false,
        true,
        false,
        true,
        null
      ]
    }
  },
  "6b72a77f3cceef19ae665b115a21bb0fc5c3d6289c9b185705dd0bf54f6de2f2": {
    "query": "INSERT INTO users VALUES ($1, $2, $3, $4)",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Text",
          "Text",
          "Text",
          "Text"
        ]
      },
      "nullable": []
    }
  },
  "771f2a72d0a796e25f90e1837fc601593a7071e8d790fcda5dcf004caa95fb45": {
    "query": "SELECT id, password FROM users WHERE username = $1",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Text"
        },
        {
          "ordinal": 1,
          "name": "password",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false,
        false
      ]
    }
  },
  "7b4b5b818b40cb78c177f05e13b277ef76102c1214c6280073f3a7e8a94ba4ef": {
    "query": "SELECT email FROM users WHERE email = $1",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "email",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        true
      ]
    }
  },
  "b3de938995c744adfb9171880990e92f295faf8618cf0f5650d91c9067be6821": {
    "query": "SELECT id, password FROM users WHERE email = $1",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Text"
        },
        {
          "ordinal": 1,
          "name": "password",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false,
        false
      ]
    }
  },
  "d884fcbfadda026ccaef127244f67218e749df0b3fe694e27232e84f1f1d4638": {
    "query": "INSERT INTO pastes VALUES ($1, $2, $3, $4, $5, $6)",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Text",
          "Text",
          "Text",
          "Text",
          "Int2",
          "Text"
        ]
      },
      "nullable": []
    }
  },
  "dd99e48b1572e25db38f03da95984fda1072913b29bb6b3753a0d351583dfff6": {
    "query": "SELECT id FROM users WHERE username = $1",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "e2002be6ef0dd2624df2a7b1a073efb11271ddd3a2707dbd5ad95939f58dab79": {
    "query": "SELECT COUNT(*) AS count FROM stars WHERE paste_id = $1",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "count",
          "type_info": "Int8"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        null
      ]
    }
  },
  "ff04920d95bdd46d50b8a0d95824669dcab961c43b09b2aabd89848ca1dbd2e9": {
    "query": "SELECT * FROM files WHERE paste_id = $1 ORDER BY idx ASC",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "paste_id",
          "type_info": "Text"
        },
        {
          "ordinal": 1,
          "name": "idx",
          "type_info": "Int2"
        },
        {
          "ordinal": 2,
          "name": "filename",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "content",
          "type_info": "Text"
        },
        {
          "ordinal": 4,
          "name": "language",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false,
        false,
        true,
        false,
        true
      ]
    }
  }
}